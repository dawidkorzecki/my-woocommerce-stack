function pickup_point_change(b){console.log(b);var d="";var c="";if(jQuery(b).is("select")){d=jQuery(b).attr("data-id");var c=jQuery(b).val()}if(typeof d=="undefined"){d=0}if(jQuery(b).is("input")){d=jQuery(b).attr("data-id");var c=jQuery(b).val()}console.log(d);jQuery("#flexible_pickup_point_"+d+"_details").hide();var a={action:"flexible_pickup_point",security:jQuery("#flexible_pickup_ajax_nonce_"+d).val(),post_id:jQuery(b).val(),id:d};console.log(a);jQuery.ajax({url:flexible_pickup_checkout.ajax_url,data:a,method:"POST",dataType:"JSON",success:function(e){console.log(e);jQuery("#flexible_pickup_point_"+e.id+"_details").replaceWith(e.content)},error:function(g,e,f){alert(g.status+": "+f)},complete:function(){}})}jQuery(document).ready(function(){function a(){jQuery(".shipping_method").each(function(b){if(jQuery(this).parent().find(".flexible-pickup-select-point").length){if(jQuery(this).is(":checked")){jQuery(this).parent().find(".flexible-pickup-select-point").show()}else{jQuery(this).parent().find(".flexible-pickup-select-point").hide()}}})}jQuery(document).on("change",".shipping_method",function(){a()});jQuery(document.body).on("updated_checkout",function(){a()});a();jQuery(document).on("click","a.fp-map-selector",function(e){e.preventDefault();var b=screen.width*0.9;if(b>900){b=900}var c=screen.height*0.8;if(c>800){c=800}var f=Number((screen.width/2)-(b/2));var g=Number((screen.height/2)-(c/2));var d=window.open(flexible_pickup_checkout.map_url+"&points_group="+flexible_pickup_checkout["points_group_"+jQuery(this).attr("data-id")]+"&select_field="+jQuery(this).attr("data-select_field"),"fp_map","toolbar=no, menubar=no, resizable=yes, width="+b+", height="+c+", top="+g+", left="+f);d.onbeforeunload=function(){jQuery(".flexible-pickup-point select").trigger("change")}});jQuery(document).on("change",".flexible-pickup-point select",function(){pickup_point_change(this)});jQuery(document).on("change",".flexible-pickup-point input[type=radio]",function(){pickup_point_change(this)})});